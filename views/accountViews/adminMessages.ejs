<% layout("layouts/boilierplate") %>
    <link rel="stylesheet" href="/stylesheets/allBank.css">

    <h1>Admin Messages</h1>

    <% let unreadMessages=messages.filter(message=> message.isRead === null || message.isRead === false); %>
        <% if (unreadMessages.length===0) { %>
            <p>-- There are no messages at this time --</p>
            <% } else { %>
                <% unreadMessages.forEach(message=> { %>
                    <div class="card">
                        <div class="card-header">
                            <form action="/accountViews/adminMessageRead/<%= message._id %>" method="post"
                                style="display: inline;">
                                <button type="submit" class="btn btn-primary">Read</button>
                            </form>
                        </div>
                        <div class="card-body">
                            <p>
                                <strong>
                                    <%= message.name %>:
                                </strong>
                                <%= message.message %>
                            </p>
                        </div>
                    </div>
                    <% }); %>
                        <% } %>